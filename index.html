<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="冰冰冰室">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="冰冰冰室">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="冰冰冰室">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>冰冰冰室</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">冰冰冰室</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">朝闻道而夕饮冰，不舍昼夜</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/31/扩散模型/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="柳冰冰">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/bingbing.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冰冰冰室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/10/31/扩散模型/" itemprop="url">社会扩散模型概要</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-31T00:00:00+08:00">
                2019-10-31
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/混社会/" itemprop="url" rel="index">
                    <span itemprop="name">混社会</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="扩散的基本定义"><a href="#扩散的基本定义" class="headerlink" title="扩散的基本定义"></a>扩散的基本定义</h2><p>扩散通常被定义成一种过程：创新通过该过程在一个社会系统的成员中随时间在不同的渠道传播。作为一个社会系统的过程，扩散具有4个关键元素：创新、传播渠道、时间和社会系统。</p>
<ul>
<li>创新：新的想法\产品\目标，比如社会传言、药品、器材、商品等</li>
<li>传播渠道：信息传播的方式如大众传媒、人际关系等</li>
<li>时间：时间通常于扩散的速度和规模相关联。</li>
<li>社会系统：社会系统即创新的潜在采纳者，比如某个地区的全部医生（新药采纳问题），也可以是政府企业乃至全体公民</li>
</ul>
<p>看完定义就可以发现，扩散过程会是互联网行业非常关注的一个话题。</p>
<h2 id="基础扩散模型"><a href="#基础扩散模型" class="headerlink" title="基础扩散模型"></a>基础扩散模型</h2><p>基础扩散模型蕴含了相当多假定：</p>
<ul>
<li>扩散过程是二分的，要么采纳，要么不采纳</li>
<li>潜在采纳者的上限固定</li>
<li>一个采纳单位只有一次采纳</li>
<li>该创新独立于其他创新</li>
<li>内部和外部的影响系数都是固定的（不随时间变化）</li>
<li>…</li>
</ul>
<p>在这些假定之下，基础扩散模型存在三种增长扩散模式</p>
<h3 id="外部影响模型"><a href="#外部影响模型" class="headerlink" title="外部影响模型"></a>外部影响模型</h3><p>模型表达式</p>
<script type="math/tex; mode=display">
\frac{dN(t)}{dt}=a[\overline{N}-N(t)]\\</script><p>其中<br>$N(t)$表示t时刻的采纳者人数<br>$\overline{N}$表示潜在采纳者总数<br>$a$表示外部影响的系数，来自社会系统的外部；通常可以认为是大众传媒对扩散的影响。</p>
<p>该模型的特点：</p>
<ul>
<li>不考虑先行采纳者和潜在采纳者的交互作用</li>
<li>总的增长速率恒定递减</li>
<li>增长曲线是一个指数衰减曲线，扩散曲线可以表示为$N(t)=\overline{N}[1-exp(-at)]​$</li>
</ul>
<p>应用案例：</p>
<ul>
<li>新药在美国西部社区医生中的扩散（1966）</li>
<li>罢工\暗杀在发展中国家的传播扩散（1973）</li>
</ul>
<p>个人理解这个模型只适用于社会成员彼此孤立（个体信息交流不便捷）的时候，现代社会成员通讯发达，先行者和潜在者的交互是很难忽略的。</p>
<h3 id="内部影响模型"><a href="#内部影响模型" class="headerlink" title="内部影响模型"></a>内部影响模型</h3><p>该模型假定扩散仅仅通过人际接触进行。</p>
<script type="math/tex; mode=display">
\frac{dN(t)}{dt}=bN(t)[\overline{N}-N(t)]\\</script><p>其中<br>$N(t)$表示t时刻的采纳者人数<br>$\overline{N}$表示潜在采纳者总数<br>人际交互由$N(t)[\overline{N}-N(t)]$表示。</p>
<p>该模型的特点：</p>
<ul>
<li>只考虑人际接触的传播</li>
<li>S型增长曲线，表达式可以表示为$N(t)=\frac{\overline{N} }{ 1+\frac{\overline{N}-N_0}{N_0}exp[-b\overline{N}(t-t_0)]}$</li>
</ul>
<p>应用案例：</p>
<ul>
<li>工业创新（柴油机）的扩散</li>
<li>玉米种子的扩散</li>
</ul>
<p>当一项创新应用复杂（意味着不方便通过大众媒体传播而更依赖向先行者学习），需要先行者的经验，同时若不采纳会带来劣势（商业上的竞争劣势等），内部影响模型较为合适。</p>
<h3 id="混合影响模型"><a href="#混合影响模型" class="headerlink" title="混合影响模型"></a>混合影响模型</h3><p>混合模型同时考虑了外部影响和内部影响</p>
<script type="math/tex; mode=display">
\frac{dN(t)}{dt}=(a+bN(t))[\overline{N}-N(t)]</script><p>该模型特点：</p>
<ul>
<li><p>同时考虑了内部影响和外部影响，更具通用性</p>
</li>
<li><p>S型增长曲线，表达式可以表示为 </p>
<script type="math/tex; mode=display">
N(t)=\frac{\overline{N}-\frac{a(\overline{N}-N_0)}{a+bN_0}exp[-(a+b\overline{N})(t-t_0)]}{1+\frac{b(\overline{N}-N_0)}{a+bN_0}exp[-(a+b\overline{N})(t-t_0)]}</script></li>
</ul>
<p>应用案例：</p>
<ul>
<li>耐用消费品的长期销量</li>
</ul>
<p>耐用消费品确实是一个非常契合基础扩散模型的场合，耐用意味着接纳者只会接纳一次，同时考虑了外部媒体和内部口碑效应的影响。对于互联网产品，基础扩散模型没有考虑到网络效应，同时内部影响的假定略微简单了。</p>
<h3 id="参数估计方法"><a href="#参数估计方法" class="headerlink" title="参数估计方法"></a>参数估计方法</h3><p>对于混合影响模型</p>
<script type="math/tex; mode=display">
\frac{dN(t)}{dt}=(a+bN(t))[\overline{N}-N(t)]</script><p>​                    </p>
<p>离散方式可以表示成</p>
<script type="math/tex; mode=display">
N(t+1)-N(t)=a\overline{N}+(b\overline{N}-a)N(t)-bN^2(t)\\
=A_1+A_2N(t)+A_3N^2(t)+e(t)</script><p>此时可以通过最小二乘法计算出$A$项</p>
<p>最后有</p>
<script type="math/tex; mode=display">
a=A_1/\overline{N}\\
b=-A_3 \\
\overline{N}=\frac{-A_2 \pm \sqrt{A^2_2-4A_1A_3}}{2A_3}</script><h2 id="扩展与改进"><a href="#扩展与改进" class="headerlink" title="扩展与改进"></a>扩展与改进</h2><h3 id="可变扩散"><a href="#可变扩散" class="headerlink" title="可变扩散"></a>可变扩散</h3><h5 id="jeuland模型"><a href="#jeuland模型" class="headerlink" title="jeuland模型"></a>jeuland模型</h5><p>jeuland模型有以下假定</p>
<ul>
<li>扩散过程中外部影响与潜在采纳者的倾向有关</li>
<li>潜在采纳者倾向是差异分布的</li>
<li>采纳的倾向服从gamma分布</li>
</ul>
<p>此时</p>
<script type="math/tex; mode=display">
F(t)=\frac{N(t)}{\overline{N}}\\
\frac{dF}{dt}=(a+bF)(1-F)^{1+\gamma},其中\gamma是预设参数</script><p>jeuland模型可以根据参数设定发生退化，当$\gamma=0​$,jeuland模型退化成bass模型（意味着潜在采纳者倾向一致）</p>
<h3 id="动态扩散"><a href="#动态扩散" class="headerlink" title="动态扩散"></a>动态扩散</h3><p>动态扩散模型主要是假定潜在上限是可变的</p>
<script type="math/tex; mode=display">
\overline{N}(t)=f(S(t))
\\
此时
\frac{dN(t)}{dt}=(a+bN(t))[f(s(t))-N(t)]\\
方程的解为\\
N(t)=-\frac{a}{b}+\frac{exp[a(t-t_0)+b\phi(t)]}{(\frac{b}{a+bN_0})+b\int_{t_0}^{t}exp[a(t-t_0)+b\phi(t)]dx}\\
其中，N(t=t_0)=N_0,\phi(t)=\int_{t_0}^{t}f(S(t))dx</script><h5 id="案例："><a href="#案例：" class="headerlink" title="案例："></a>案例：</h5><ul>
<li><p>估计计算机的自然增长（1967）</p>
<p>首先假设计算机的潜在采纳者和计算机的价格相关。</p>
<script type="math/tex; mode=display">
\overline{N}(t)=B_0[P(t)]^{-B_1},其中P(t)是价格，B_0，B_1是常数</script><p>并使用动态扩散模型来估计计算机销量自然增长</p>
</li>
</ul>
<h3 id="多重扩散"><a href="#多重扩散" class="headerlink" title="多重扩散"></a>多重扩散</h3><p>创新并非单独出现的，创新之间具有相互影响的关系。</p>
<p>相互影响关系至少有以下几种：</p>
<ul>
<li>独立性</li>
<li>互补性：一项创新采纳的增加会促进另一项采纳（洗衣机和干衣机）</li>
<li>有条件性：一项创新采纳要取决于其他创新的采纳情况（计算机软件和计算机）</li>
<li>可替代性：一项创新会导致另一项创新的采纳的减少（黑白电视和彩色电视）</li>
</ul>
<p>比如可替代性可以表示为：</p>
<script type="math/tex; mode=display">
\frac{dN_1(t)}{dt}=[a_1+b_1N_1(t)-c_1N_2(t)][\overline{N}_1-N_1(t)]\\
\frac{dN_2(t)}{dt}=[a_2+b_2N_2(t)-c_2N_1(t)][\overline{N}_2-N_2(t)]</script><p>需要注意的是，替代可能是单向性，彩色电视对黑白电视有替代作用，反过来未必如此。</p>
<h3 id="时空扩散模型"><a href="#时空扩散模型" class="headerlink" title="时空扩散模型"></a>时空扩散模型</h3><p>地理上的扩散通常要遵循以下规则：</p>
<ul>
<li>等级效应：先从大的中心点再到小的中心点</li>
<li>邻近效应：先从中心开始，逐渐向四周扩散</li>
</ul>
<p>当设计到地理空间的扩散是，一种方式是根据每个地区的情况使用一个扩散模型，另一种是把邻近效应添加到扩散模型中。</p>
<h3 id="多阶段扩散"><a href="#多阶段扩散" class="headerlink" title="多阶段扩散"></a>多阶段扩散</h3><p>多阶段扩散中，社会成员需要经历多个阶段才能变成采纳者（比如，吃瓜群众-潜在采纳者-采纳者），同时采纳者也可能退化遗忘变回吃瓜群众。</p>
<h5 id="dodson-muller模型（1978）"><a href="#dodson-muller模型（1978）" class="headerlink" title="dodson-muller模型（1978）"></a>dodson-muller模型（1978）</h5><script type="math/tex; mode=display">
基本假定1：\\吃瓜群众+潜在采纳者+采纳者的人群总数守恒\\
\frac{dx(t)}{dt}+\frac{dy(t)}{dt}+\frac{dz(t)}{dt}=0\\
基本假定2:\\
吃瓜群众和采纳者的相互作用:\beta x(y+z)\\
外部影响：\mu x\\
潜在采纳者向采纳者的转变：\gamma y\\
\frac{dy}{dt}=\beta x(y+z)+\mu x-\gamma y\\
\frac{dz}{dt}=\gamma y</script><script type="math/tex; mode=display">
最后，把
x=M-\overline{N}(t),y=\overline{N}(t)-N(t),z=N(t)
带入前面微分方程即可</script><h3 id="带重复采纳的扩散"><a href="#带重复采纳的扩散" class="headerlink" title="带重复采纳的扩散"></a>带重复采纳的扩散</h3><p>基础模型只允许一次采纳，现实中扩散可以带多种采纳。</p>
<h5 id="Lilien重复购买模型（1981）"><a href="#Lilien重复购买模型（1981）" class="headerlink" title="Lilien重复购买模型（1981）"></a>Lilien重复购买模型（1981）</h5><script type="math/tex; mode=display">
N（t+1）= a(t)[\overline{N}-N(t)]+b[N(t)-N(t-1)][\overline{N}-N(t)]+c(t)N(t)\\
其中，a(t)[\overline{N}-N(t)]反应外部影响，b[N(t)-N(t-1)][\overline{N}-N(t)]表示口头相互交流，c(t)N(t)表示继续采纳者</script><h3 id="带中介的扩散"><a href="#带中介的扩散" class="headerlink" title="带中介的扩散"></a>带中介的扩散</h3><p>假设各个因素都受到中介的影响</p>
<script type="math/tex; mode=display">
常见的假设如：\\
把价格作为内部影响的关键：b_t=\beta_1exp(-\beta_2 \times price_t)\\
把广告花费作为外部影响的关键：a_t=\alpha_1+\alpha_2\times ln(A_t)</script>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/21/一种简单的序贯AB测试方法 2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="柳冰冰">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/bingbing.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冰冰冰室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/21/一种简单的序贯AB测试方法 2/" itemprop="url">一种简单的序贯AB测试方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-09-21T00:00:00+08:00">
                2019-09-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/抖机灵/" itemprop="url" rel="index">
                    <span itemprop="name">抖机灵</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Sequential-AB-testing"><a href="#Sequential-AB-testing" class="headerlink" title="Sequential AB testing"></a>Sequential AB testing</h2><p>在做AB测试时，为了避免出现重复显著性检验的情况，我们会预先设定一个样本值，只有到流量达到样本阈值时，才会进行统计检验。</p>
<p>这又引申出了一个问题：有没有一种AB测试方法，可以不用提前设置流量阈值，并可以在当实验组效果明显好于对照组的时候，能够提前停止实验？</p>
<p>一般而言，Sequential AB testing 需要用到序贯分析sequential probability ratio test，但是，在<br><a href="http://www.evanmiller.org/sequential-ab-testing.html" target="_blank" rel="noopener">even miller</a>博客上记录了以下一种简单方法，这种方法也是可行的。</p>
<p>以下是该方法的流程：</p>
<ul>
<li>1.实验开始前，选定一个数字N</li>
<li>2.对两个实验均分流量进行测试</li>
<li>3.记录A实验的成功数，记为T，记录B实验的成功次数，记为C</li>
<li>4.<script type="math/tex">T-C>1.96*\sqrt{N}​</script> 时停止实验，说明A实验效果优于B实验</li>
<li>5.<script type="math/tex">T+C>N</script> 时停止实验，说明无明显差异</li>
</ul>
<h2 id="原理：随机游走，反射定理、ballot-theorem及近似分布"><a href="#原理：随机游走，反射定理、ballot-theorem及近似分布" class="headerlink" title="原理：随机游走，反射定理、ballot theorem及近似分布"></a>原理：随机游走，反射定理、ballot theorem及近似分布</h2><p>以下内容主要来自<a href="https://www.amazon.com/Introduction-Probability-Theory-Applications-Vol/dp/B006QYQ5NU" target="_blank" rel="noopener">Feller’s <em>Introduction to Probability</em> book</a></p>
<h5 id="从-（0-0）-到达-（n-x）-的随机游走"><a href="#从-（0-0）-到达-（n-x）-的随机游走" class="headerlink" title="从$（0,0）$到达$（n,x）$的随机游走"></a>从$（0,0）$到达$（n,x）$的随机游走</h5><p>投掷一枚均匀的硬币，正面为+1，负面为-1，记n为投掷次数，x为累积分数。</p>
<p>对于某一时刻<script type="math/tex">（n，x）</script>，定有<script type="math/tex">p</script>次为<script type="math/tex">+1</script>，<script type="math/tex">q</script>次为<script type="math/tex">-1</script>，则</p>
<script type="math/tex; mode=display">
n=p+q，x=p-q</script><p>则容易得到</p>
<script type="math/tex; mode=display">
N_{n,x}=\binom{p+q}{p}=\binom{n}{\frac{n+x}{2}}</script><p>若不存在<script type="math/tex">n、x</script>满足上述条件，则<script type="math/tex">N_{n,x}=0</script></p>
<h5 id="反射定理"><a href="#反射定理" class="headerlink" title="反射定理"></a>反射定理</h5><p>令<script type="math/tex">A=(a,b)</script>,<script type="math/tex">B=(c,d)</script>,则<script type="math/tex">A'=（a,-b)</script>接触<script type="math/tex">x</script>轴到达<script type="math/tex">B</script>的路径数和<script type="math/tex">A</script>接触x轴到达<script type="math/tex">B</script>路径数一样多</p>
<p><img src="https://benny-1258761034.cos.ap-guangzhou.myqcloud.com/randomwalk.png" alt="randomwalk"></p>
<p>则此时，明显地，从<script type="math/tex">（0，0）</script>出发且不与<script type="math/tex">x</script>轴相交到达<script type="math/tex">（n,x)</script>的的路径数和从<script type="math/tex">（1，1）</script>出发不与x轴相交到达<script type="math/tex">（n,x）</script>的路径数一样多，并记为<script type="math/tex">r_{n,x}</script>。</p>
<h5 id="ballot-theorem"><a href="#ballot-theorem" class="headerlink" title="ballot theorem"></a>ballot theorem</h5><p>我们把<script type="math/tex">（1，1）</script>开始到达<script type="math/tex">（n，x）</script>的所有路径数记为<script type="math/tex">N_{n-1，x-1}</script>，把<script type="math/tex">（1，-1）</script>开始到达<script type="math/tex">（n，x）</script>的所有路径数记为<script type="math/tex">N_{n-1，x+1}</script>。显然<script type="math/tex">N_{n-1，x+1}</script>就是从<script type="math/tex">（1，1）</script>开始接触或穿过x轴到达<script type="math/tex">（n，x）​</script>的路径数</p>
<p>则有</p>
<script type="math/tex; mode=display">
N_{n-1，x+1} +r_{n,x} =N_{n-1，x-1}</script><p>则有</p>
<script type="math/tex; mode=display">
r_{n,x} =N_{n-1，x-1}-N_{n-1，x+1} =\binom{p+q-1}{p-q-1}-\binom{p+q-1}{p-q+1}=\frac{x}{n}N_{n,x}=\frac{x}{n}\binom{n}{\frac{n+x}{2}}</script><p>也就是说，不接触x轴的路径占所有路径的<script type="math/tex">\frac{x}{n}</script>.</p>
<p>类似地，当把<script type="math/tex">x</script>轴换成是直线<script type="math/tex">y=x</script>时，从<script type="math/tex">（0，0）</script>出发，不接触<script type="math/tex">y=x</script>到达<script type="math/tex">（n,x）</script>的路径数也为<script type="math/tex">\frac{x}{n}\binom{n}{\frac{n+x}{2}}</script></p>
<h5 id="limit-theorem-for-first-passages"><a href="#limit-theorem-for-first-passages" class="headerlink" title="limit theorem for first passages"></a>limit theorem for first passages</h5><script type="math/tex; mode=display">
令a_k =b(v+k;2v,\frac{1}{2})，则a_0=b(v;2v,\frac{1}{2})=\binom{2v}{v},且有\\
a_k =a_0\frac{v(v-1)..(v-k+1)}{(v+k)(v+k-1)(v+1)}=a_0\prod_{i=1}^k\frac{v-k+i}{v+i}=a_0\prod_{i=1}^k(1-\frac{k}{v+i})
\\当v很大时，
有1+\frac{j}{v} \approx e^{j/v},a_k \approx a_0\prod_{i=1}^k(1-\frac{k}{v})\approx a_0e^{-k^2/v}

\\由stering公式 :n!\approx\sqrt{2\pi n}\frac{n}{e}n,可得:
\\a_0 = 2^{-2v}\frac{(2v)!}{(v!)^2} \approx 2^{-2v}\frac{\sqrt{2\pi}(2v)^{2v+\frac{1}{2}}e^{-2v}}{2\pi v^{2v+1}e^{-2v}}\approx\frac{1}{\sqrt{\pi v}}
\\






综上所述，有
P_{n,x} = \frac{x}{n}\binom{n}{\frac{n+x}{2}}2^{-n}=\frac {x}{n}{a(x/2)}\approx \sqrt{\frac{2}{\pi}}\frac{x}{\sqrt {n^3} }e^{\frac{-x^2}{2n}}





\\则
\sum_1^n {P_{n,x}} \approx \int{P_{n,x}}d_x 





\\
\int{P_{n,x}}d_x =\int_1^\infty\sqrt{\frac{2}{\pi}}\frac{x}{\sqrt{n^3} }e^{\frac{-x^2}{2n}}\\
令t=\frac{x}{\sqrt{n}},则




\\
原式=2\int_{-x}^x\sqrt{\frac{1}{2\pi}} e^\frac{-t^2}{2}dt=2(1-U(x))

\\观察可得此为正态分布积分形式
\\则对于
\sum_1^n {P_{n,x}}<\alpha
\\有 x<Z_{1-\frac{\alpha}{2}}N；当\alpha=0.05时，Z_{1-\frac{\alpha}{2}}=1.96</script><h2 id="场景：赌徒输光问题与AB测试实验"><a href="#场景：赌徒输光问题与AB测试实验" class="headerlink" title="场景：赌徒输光问题与AB测试实验"></a>场景：赌徒输光问题与AB测试实验</h2><p>ballot theorm 可以用来解决一下问题:</p>
<h5 id="赌徒输光问题"><a href="#赌徒输光问题" class="headerlink" title="赌徒输光问题"></a>赌徒输光问题</h5><p>假设有一个有x枚金币的赌徒，初始有<script type="math/tex">x​</script> 枚金币，每次胜率为<script type="math/tex">0.5​</script>，可以看到，赌徒正好在第<script type="math/tex">n​</script>轮输光所有金币的概率为</p>
<script type="math/tex; mode=display">
P_{n,x}= \frac{x}{n}\binom{n}{\frac{n+x}{2}}2^{-n}</script><p>而赌徒在第n轮前输掉所有金币的概率</p>
<script type="math/tex; mode=display">
\sum{P_{n,x}}= \sum_{n=1}^N \frac{x}{n} {n \choose (n+x)/2}2^{-n}</script><h5 id="引申：AB测试"><a href="#引申：AB测试" class="headerlink" title="引申：AB测试"></a>引申：AB测试</h5><p>同样的，我们可以用ballot theorem来解释一个初始分数为0的玩家，不断投掷硬币<script type="math/tex">（正面+1分，反面-1分）</script>，在第n轮时首次达到<script type="math/tex">x</script>分的概率为</p>
<script type="math/tex; mode=display">
P_{n,x}= \frac{x}{n}\binom{n}{\frac{n+x}{2}}2^{-n}</script><p>同样的，玩家前<script type="math/tex">n</script>轮能达到<script type="math/tex">x</script>分的概率为</p>
<script type="math/tex; mode=display">
\sum{P_{n,x}}= \sum_{n=1}^N \frac{x}{n} {n \choose (n+x)/2}2^{-n}</script><p>此时，我们假设通过AB测试来玩这个游戏，则若两个实验的效果没有差别，则AB测试会近似这一过程。</p>
<h6 id="统计检验"><a href="#统计检验" class="headerlink" title="统计检验"></a>统计检验</h6><p>对于<script type="math/tex">AB​</script>测试这一过程，我们期待一个实验组比对照组的效果要提升<script type="math/tex">\delta​</script>，则</p>
<script type="math/tex; mode=display">
p = \frac{p_t}{p_c+p_t} = \frac{p_t/p_c}{1+p_t/p_c} = \frac{1}{1+(1+\delta)} = \frac{1+\delta}{2+\delta}</script><p>对于AB测试的过程</p>
<script type="math/tex; mode=display">
H_0：p_c = p_t ;H_1:p_t>p_c
\\等价于
\\H_0：p = \frac{1+\delta}{2+\delta}=\frac{1}{2} ;H_1:p>\frac{1}{2}</script><h6 id="参数计算"><a href="#参数计算" class="headerlink" title="参数计算"></a>参数计算</h6><p>为了保证犯第一类错误和第二类错误的概率，可以构建以下不等式组：</p>
<script type="math/tex; mode=display">
\sum_{n=1}^N \frac{d^*}{n}{n \choose (n+d^*)/2}\left(\frac{1}{2+\delta}\right)^{(n-d^*)/2} \left(\frac{1+\delta}{2+\delta}\right)^{(n+d^*)/2} > 1 - \beta \\
\sum_{n=1}^N \frac{d^*}{n} {n \choose (n+d^*)/2}2^{-n} < \alpha</script><p>通过迭代运算，我们可以计算出停止实验所需要的<script type="math/tex">d^*​</script> 和<script type="math/tex">N​</script>；通过近似分布，我们可以的得到<script type="math/tex">d^*=Z_{1-\frac{\alpha}{2}}N​</script>；并最终得到N。</p>
<p>最后, 对于两个实验成功的次数T和C，如果在T+C达到N之前达到T-C达到<script type="math/tex">d^*</script>时，则拒绝<script type="math/tex">H_0</script></p>
<h6 id><a href="#" class="headerlink" title=" "></a> </h6>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/10/北京的脉动/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="柳冰冰">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/bingbing.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冰冰冰室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/10/北京的脉动/" itemprop="url">北京的脉动</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-10T00:00:00+08:00">
                2019-03-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/抖机灵/" itemprop="url" rel="index">
                    <span itemprop="name">抖机灵</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>研究生的时候做的一个小作业，主题是对北京市出租车定位做数据挖掘。数据来源是一个同学搞到的北京市出租车的定位数据，我在里面主要做了数据可视化的工作。这是一个研讨课的作业，所以最后只是出了一个方案<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">exactly, PPT</span>.</p>
<p><img src="https://benny-1258761034.cos.ap-guangzhou.myqcloud.com/result.gif" alt="北京的脉动"></p>
<p>离开北京三年了，此刻竟有点想念她</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/18/世界/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="柳冰冰">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/bingbing.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冰冰冰室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/18/世界/" itemprop="url">世界</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-18T00:00:00+08:00">
                2018-01-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/抖机灵/" itemprop="url" rel="index">
                    <span itemprop="name">抖机灵</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="一"><a href="#一" class="headerlink" title="一"></a>一</h3><p>网易云音乐出了个年终总结，在那一天，朋友圈被刷屏了。<br><span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">这一年里 你一共画了0篇完成度高的论文 你热衷的风格成谜 喜欢在深夜摸鱼 你习惯下载各种文献 却很少在下载后再阅读那些文献 2017年，你写的最多的东西是 title ....</span>.</p>
<p>我的大部分好友（包括我），听到的最多的歌词都是世界<br><img src="https://benny-1258761034.cos.ap-guangzhou.myqcloud.com/PT.jpg" alt="世界"></p>
<p>所以，关心世界是我们的本意吗?</p>
<h3 id="二"><a href="#二" class="headerlink" title="二"></a>二</h3><p>在不到一年之前，我<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">冰冰</span>爬取过网易云音乐的歌词。当时只是顺着民谣歌单来收集歌词，结果发现歌迷们爱好广泛，分类杂乱，连广播体操都能算到民谣里面去。</p>
<p>不过去掉停用词后，中文词后里出现频率最高的还是世界<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">interesting</span><br><img src="https://benny-1258761034.cos.ap-guangzhou.myqcloud.com/lyrics.jpg" alt="歌词"></p>
<p>怀着艺术情怀的歌手和作者们，全部灵感都来自于他们的世界。</p>
<h3 id="终"><a href="#终" class="headerlink" title="终"></a>终</h3><p>热爱生活，放眼世界，关心人类；我赞许那些一边哭泣一边追求的人。</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=25706282&auto=1&height=66"></iframe>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/13/关于深度学习进行金融预测的报告/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="柳冰冰">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/bingbing.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冰冰冰室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/13/关于深度学习进行金融预测的报告/" itemprop="url">关于深度学习进行金融预测的报告</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-13T00:00:00+08:00">
                2017-06-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/抖机灵/" itemprop="url" rel="index">
                    <span itemprop="name">抖机灵</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这是之前为了参加某次活动而写的一个研究小报告，算是对自己自学的一些总结。</p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>随着信息科技的进步，人类开始进入大数据时代。海量的数据，快速提高的计算能力，和对数据隐含的信息的需求，催生了一项面目一新的技术—深度学习。从89年Yenn Lecun将cnn用于手写数字识别，到吴恩达将深度学习用于猫的识别，再到谷歌的AlphaGo击败围棋世界冠军，深度学习以其强大的特征抽取和学习能力引发了巨大的浪潮，成为现在高新科技领域的一个研究重点，并且正在渗透进入多个行业。人们期望它能像击败围棋世界冠军一样，解决其所在行业的未解难题。</p>
<p>在投资领域中，股票等的价格预测一直是投资者极度关注的难题。因为涉及到国家政策、全球经济、个体交易者期望的外部因素，金融中的价格数据经常呈现出非线性，非平稳的特点，让人难以捉摸。根据有效市场理论（Efficient Market Hypothesis），股票价格呈随机游走状态。而在实际市场中，价格则往往存在某种变化的模式，同时，也受到外部消息的严重影响。对于价格波动中潜在的变化模式，由于深度学习所具有的强大的特征抽取能力，深度学习有能力在海量的数据中挖掘出变化的规律，从而给交易决策者提供宝贵的参考。</p>
<p>这份报告将使用深度学习的方法来进行价格预测的尝试。</p>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><h4 id="深度学习模型的选择"><a href="#深度学习模型的选择" class="headerlink" title="深度学习模型的选择"></a>深度学习模型的选择</h4><p>卷积神经网络在图像识别等多个领域取得了显著的成功。虽然卷积神经网络具有强大的特征识别能力，但是时间序列中的特征往往具有时间关系，传统的卷积神经网络的卷积和池化所带来的平移不变性，使得其难以模拟潜在的时间关系。虽然可以通过改变卷积方式的方法来对模型进行改进，但是文献调研表明，卷积神经网络在时间序列分析中并不常用。而在目前，LSTM是在应用中最为有效的序列模型。</p>
<h4 id="相关技巧"><a href="#相关技巧" class="headerlink" title="相关技巧"></a>相关技巧</h4><h5 id="数据预处理"><a href="#数据预处理" class="headerlink" title="数据预处理"></a>数据预处理</h5><ul>
<li><p>1、设置窗口</p>
<p>使用者可以通过设定窗口长度，截取一定长度的价格序列来进行分析。</p>
</li>
<li><p>2、数据标准化</p>
<p>相比于直接使用原始的价格数据，对数据进行标准化处理会是更好的选择。常用的标准化方法有z-score标准化，min-max标准化等，也可以通过计算回报率来简单处理。</p>
</li>
<li><p>超参数搜索</p>
<p>超参数对深度学习的效果和表现有着重要的影响。相比于手动调整参数更依赖于经验与对模型的理解，让计算机自动进行超参数搜索会是一个更节省人力的方法。对于超参数较少的模型，使用者可以采用网格搜索的方法，在预先定义的有限组合中进行搜索。网格搜索的计算代价会随着超参数数量呈指数级增长。另一个更可行的方法是随机搜索。这两种方法在scikit-learn中都有对应模块。</p>
</li>
<li><p>提前终止</p>
<p>对于复杂的模型，随着训练时间的推移，模型将存在过拟合的风险。当训练时间足够长时，往往会出现验证集误差不降反升的情况。此时可以使用提前终止的策略，当验证集上的误差在事先指定的循环次数内没有进一步改善时，算法就会终止。提前终止将有效地防止过拟合，同时，它也有效地选择了训练的轮数。</p>
</li>
<li><p>Bagging</p>
<p>Bagging(bootstrap aggregating)是通过结合几个模型降低泛化误差的技术。bagging通过对已有数据集进行重复采样，来构造新的数据集并进行训练，最后获得多个模型结果，并进行平均。可以证明bagging可以有效地减少泛化误差。在理想的情况下，通过训练出偏差小，而方差较大的多个模型，然后进行模型平均，使用者能得到更为理想的结果。</p>
</li>
</ul>
<h4 id="外部消息集成"><a href="#外部消息集成" class="headerlink" title="外部消息集成"></a>外部消息集成</h4><p>虽然时间序列数据中蕴含着价格变动的模式，然而金融市场的价格变动经常受到外界消息的强烈影响，在很多时候，一个外界的消息可以迅速改变当前的价格变动模式。在进行投资决策时，必须要对价格变化的模式和外部的信息进行集成。事实上，交易员Q在进行决策时，就是一种各种信息的集成。以下是两种可用的信息：</p>
<ul>
<li><p>其它市场指标数据</p>
<p>可以使用当前市场指标数据对价格进行回归分析，把结果集合到最终的决策中。</p>
</li>
<li><p>媒体和社交网络信息</p>
<p>媒体和社交网络上蕴含了大量的群体的观点和信息。通过对社交网络的文字进行处理，研究者可以获得当前大众群体对投资对象的观点和看法。从媒体中抽取出利好或利空的消息，也将对交易策略提供有效的信息。</p>
</li>
</ul>
<h3 id="初步完成的工作"><a href="#初步完成的工作" class="headerlink" title="初步完成的工作"></a>初步完成的工作</h3><p>因为时间、硬件、数据以及个人的知识的不足，此处仅仅完成了一个很不成熟的尝试，使用LSTM来对已有的金融价格数据进行预测。程序代码在code文件夹中。</p>
<ul>
<li><p>数据的预处理</p>
<p>观察附件1.1可以发现，自2016-12-08之后，该金融标的价格就再也没有改变。考虑到所有缺少的数值都由最近的之前工作日的值来替代，因此有理由认为在这之后的值都已经缺失，因此需要对其进行删除。</p>
<p>此处选择90天的窗口，对时间序列进行截断，使用前90天的价格序列来预测下一个价格。窗口长度是一个超参数，后续可以通过超参数搜索的方法调整。对一段子序列{a1,….an}，此处只通过以下式子进行简单处理：</p>
<script type="math/tex; mode=display">n_i=(\frac{a_i}{a_0})</script><p>最后从处理得到的序列中，抽取10%的子时间序列来作为测试序列</p>
</li>
<li><p>LSTM模型的构建和训练</p>
<p>Keras基于Theano或TensorFlow，是一个常用的神经网络库。其优点是高度模块化，非常适合快速实验，进行简易快速的原型设计。此处使用keras快速的搭建了一个LSTM模型来进行实验，模型结构如下：<br><img src="https://benny-1258761034.cos.ap-guangzhou.myqcloud.com/1.jpg" alt="lstm"><br>在训练的过程中，程序使用训练集数据中的5%的数据作为验证集，并且使用了提前终止的训练策略。同时，程序使用MSE（最小均方误差）作为代价函数，使用了RMSProp作为优化方法。在模型中，包括节点个数，优化方法等都可以作为超参数进行进一步优化，比如流行的优化方法就还有Adam，SGD等。</p>
</li>
<li><p>结果</p>
<p>在完成模型的训练后，使用测试集对模型进行检测，通过90天的时间序列来预测下一个价格。得到的图像如下所示：</p>
</li>
</ul>
<p><img src="https://benny-1258761034.cos.ap-guangzhou.myqcloud.com/LSTM.png" alt="prediction_point_by_point"></p>
<p>  但是因为结果仅仅反映当前价格相对90天前的价格的变化，而在实际使用中，更需要关注的前后两天的价格变化趋势。在对结果变换回实际结果后，模型对前后两天的价格变化趋势的预测的准确率约为65%。程序的一次运行结果保存在code文件夹的ipython.html中。</p>
<p>  模型的预测结果并不是十分令人满意，模型本身也有许多需要改进之处，比如标准化方法的选取。同时，也没有进行超参数搜索和Bagging。个人认为，模型还有一定的提高空间，需要后续的工作和学习来进行完善和提高。</p>
<h4 id="后续计划"><a href="#后续计划" class="headerlink" title="后续计划"></a>后续计划</h4><ul>
<li><p>超参数搜索</p>
<p>模型中具有较多的超参数，包括数据初始化的窗宽选取，标准化的方法，模型的节点，优化的方法，初始学习率乃至激活函数的类型等。使用随机搜素的方法可以选取出更为合适的超参数。</p>
</li>
<li><p>Bagging</p>
<p>如前文所说，Bagging是一个减少泛化误差的强大的方法，任何机器学习算法都可以从Bagging中大幅获益（代价则是更多的运算和空间需求）。在机器学习竞赛中，获胜的算法往往都是多个模型的平均。模型集合使得使用者可以在单个模型总追求更小的偏差，而容许较大的方差。</p>
</li>
<li><p>大数据平台下的深度学习</p>
<p>无论是深度学习本身，还是超参数搜索和模型集合，所需要的计算能力都是巨大的。对于超参数搜索和模型集合来说，在大数据平台下并行求解是相对简单的。</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/14/中文维基百科的主题模型分析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="柳冰冰">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/bingbing.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冰冰冰室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/14/中文维基百科的主题模型分析/" itemprop="url">中文维基百科的主题模型分析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-14T20:12:20+08:00">
                2017-03-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/抖机灵/" itemprop="url" rel="index">
                    <span itemprop="name">抖机灵</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="语料的获取"><a href="#语料的获取" class="headerlink" title="语料的获取"></a>语料的获取</h3><h5 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h5><p>相比于其他语料，中文维基百科提供了免费的语料资源，可以直接从<a href="http://download.wikipedia.com/zhwiki/latest/zhwiki-latest-pages-articles.xml.bz2" target="_blank" rel="noopener">中文维基百科标题和正文</a>处直接下载。</p>
<h5 id="抽取"><a href="#抽取" class="headerlink" title="抽取"></a>抽取</h5><p>对下载好的文件，可以使用<a href="http://medialab.di.unipi.it/wiki/Wikipedia_Extractor" target="_blank" rel="noopener">Wikipedia_Extractor</a>直接对文件进行抽取处理：首先在解压缩下载文件得到xml格式的数据，然后执行WikiExtractor.py处理xml数据即可：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./WikiExtractor.py -b 1000M -o extracted2 zhwiki-latest-pages-articles.xml</span><br></pre></td></tr></table></figure></p>
<p>这表示把指定的xml文件抽取并以1000M的单位大小来切分文件，文件输出到extracted2文件夹中。</p>
<h5 id="简繁转换"><a href="#简繁转换" class="headerlink" title="简繁转换"></a>简繁转换</h5><p>抽取好的文档混杂的繁体中文，使用opencc可以对抽取的文档进行简繁转换。（很久之前就听说过opencc的作者BYVoid大神的大名TT）<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ opencc -i wiki_00 -o wiki_chs -c zht2zhs.ini</span><br></pre></td></tr></table></figure></p>
<p>经过简繁转换后，文档就预处理得差不多了。在我的实践中，文章中还剩下一下诸如<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">doc</span> <span class="attr">id</span>=<span class="string">"13"</span> <span class="attr">url</span>=<span class="string">"https://zh.wikipedia.org/wiki?curid=13"</span> <span class="attr">title</span>=<span class="string">"数学"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>之类的标签没有去除，可以简单的使用python的正则表达式再把它去掉。维基百科中文语料的获取主要参考<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">抄袭</span> 自 <a href="http://licstar.net/archives/tag/wikipedia-extractor" target="_blank" rel="noopener">这篇文章</a></p>
<h3 id="结巴中文分词"><a href="#结巴中文分词" class="headerlink" title="结巴中文分词"></a>结巴中文分词</h3><p>主题模型使用的是词袋模型，和英文词语直接有空格隔开不同，中文需要进一步进行分词。目前常用的中文分词工具有jieba<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">jiba</span> 分词。</p>
<p>无论是中文文章还是英文文章，文档中都会出现大量的和文档描述的主题没什么关联的词：比如英文的a，and；中文的‘不会’，‘不但’这一大类词语。中文的停用词词表很多，这是其中<a href="https://github.com/dongxiexidian/Chinese/blob/master/stopwords.dat" target="_blank" rel="noopener">一个</a></p>
<p>进行中文分词后的文本的前后对比：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">基础数学的知识与运用总是个人与团体生活中不可或缺的一块。其基本概念的精炼早在古埃及、美索不达米亚及古印度内的古代数学文本内便可观见。从那时开始，其发展便持续不断地有小幅的进展，直至16世纪的文艺复兴时期，因为和新的科学发现相作用而产生的数学革新导致了知识的加速发展，直至今日。</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">基础 数学 知识 团体 生活 不可或缺 一块 基本概念 精炼 古埃及 美索不达米亚 古印度 古代 数学 文本 可观 发展 持续 地有 小幅 进展 直至 世纪 文艺复兴 时期 科学 发现 作用 数学 革新 导致 知识 加速 发展 直至 今日</span><br></pre></td></tr></table></figure>
<p>不得不承认我的这次分词还不够智能，短短的一段就出现了‘地有’，‘可观’这样错误。突然想起小朋友用天真造句的梗了：<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">今天天真冷呀</span>。不过在这段关于数学的文章中，jieba分词的结果并没有对语义造成太大的影响，关键的词语都没有被分错。</p>
<h3 id="主题模型"><a href="#主题模型" class="headerlink" title="主题模型"></a>主题模型</h3><p>在主题模型，潜在狄利克雷分配（Latent Dirichlet allocation）是我最早接触到。关于LDA中复杂的数学原理，这篇文章讲解得相对深入浅出：LDA数学八卦</p>
<p>虽然其数学原理相当复杂，但是python中的gensim包使用起来却非常简单。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf8</span></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">from</span> gensim <span class="keyword">import</span> corpora,models</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logging.basicConfig(format=<span class="string">'%(asctime)s : %(levelname)s : %(message)s'</span>, level=logging.INFO)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">divide</span><span class="params">(x)</span>:</span><span class="comment">#根据文件的特征，切分出文档</span></span><br><span class="line">    <span class="keyword">with</span> io.open(x,encoding =<span class="string">'utf8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        text=[]</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">            l=line.split()</span><br><span class="line">            <span class="keyword">if</span> len(l)!=<span class="number">0</span>:</span><br><span class="line">                text.extend(l)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">yield</span> text</span><br><span class="line">                text=[]</span><br><span class="line">            </span><br><span class="line">dictionary=corpora.Dictionary(divide(<span class="string">'outfile.txt'</span>))</span><br><span class="line">corpus = [ dictionary.doc2bow(text) <span class="keyword">for</span> text <span class="keyword">in</span> divide(<span class="string">'outfile.txt'</span>)]</span><br><span class="line">dictionary.save(<span class="string">'mydict1.dic'</span>)</span><br><span class="line">corpora.MmCorpus.serialize(<span class="string">'corpora.mm'</span>, corpus) </span><br><span class="line">lda = models.LdaModel(corpus = corpus,id2word=dictionary,num_topics=<span class="number">100</span>,passes=<span class="number">3</span>)</span><br><span class="line">lda.save(<span class="string">'model1.lda'</span>)</span><br></pre></td></tr></table></figure></p>
<p>这里因为把所有文档都存到了一个文件中，所以后面根据文件的格式拆分了一下（有些小缺陷，不过应该不会造成太大的偏差）。这里预先设定了100个主题，构建这个主题模型会花费大量的运行时间。</p>
<h3 id="有趣的结果"><a href="#有趣的结果" class="headerlink" title="有趣的结果"></a>有趣的结果</h3><p>使用python wordcloud可以可视化得到的主题。<br>涉及文档最多的主题：<br><img src="https://benny-1258761034.cos.ap-guangzhou.myqcloud.com/max_word.jpg" alt="涉及文档最多的主题"></p>
<p>中文维基百科嘛，讲的都是中国的东西。虽然混入了一些奇怪的词语，不过考虑到她涉及了大量的文档，<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">当然是原谅她啊</span>。<br>涉及文档最少的主题：<br><img src="https://benny-1258761034.cos.ap-guangzhou.myqcloud.com/min_word.jpg" alt="涉及文档最少的主题"><br>AV二字真是分外醒目，<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">然而并没什么可奇怪的</span>。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/10/写博客的缘由/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="柳冰冰">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/bingbing.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冰冰冰室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/10/写博客的缘由/" itemprop="url">写博客的缘由</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-10T20:12:20+08:00">
                2017-03-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/碎碎念/" itemprop="url" rel="index">
                    <span itemprop="name">碎碎念</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>从小以来，我都是一个感情丰富的人。在中学时代，我喜欢阅读各类的文学书籍，也喜欢和朋友们进行有趣的辩论和交谈。可能是因为上述的原因，我的作文水平还不赖，我喜欢把自己的观点用更加新颖有趣的方式表达出来。</p>
<p>可是在一段很长的时间里，我的写作能力有了很大的退化，以至于可能仅剩下有限的两种能力：在社交网络上自言自语的自嘲，以及在实验报告上数据和结果的简单罗列。我也没有了记述自己生活的习惯，人的记忆力总是有限的，生活中的小的实践，小的感遇，读过的一本书，对某个人的想念，虽然它们并不会带来巨大的转变，但是从中得到的经验也是值得铭记的。</p>
<p>曾有位尊敬的长者<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">不是闷声发大财那位</span> 说过，会讲话是非常重要的，把自己的观点、情感通过语言有层次，有逻辑地表达出来，会是一项十分有用的能力。我想，拥有写作的习惯会对提高这一能力有所帮助。</p>
<p>人之相与，俯仰一世；向之所欣，俯仰之间，已为陈迹。我将在空闲时候把自己做过的一些事情记述下来。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/bingbing.png" alt="柳冰冰">
            
              <p class="site-author-name" itemprop="name">柳冰冰</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">柳冰冰</span>

  
</div>


  



  <span class="post-meta-divider">|</span>



  




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":100,"height":200},"mobile":{"show":true},"log":false});</script></body>
</html>
