<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="冰冰冰室">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="冰冰冰室">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="冰冰冰室">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>冰冰冰室</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">冰冰冰室</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">朝受命而夕饮冰，不舍昼夜</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/18/世界/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="柳冰冰">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/bingbing.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冰冰冰室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/18/世界/" itemprop="url">世界</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-18T00:00:00+08:00">
                2018-01-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/抖机灵/" itemprop="url" rel="index">
                    <span itemprop="name">抖机灵</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="一"><a href="#一" class="headerlink" title="一"></a>一</h3><p>网易云音乐出了个年终总结，在那一天，朋友圈被刷屏了。<br><span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">这一年里 你一共画了0篇完成度高的论文 你热衷的风格成谜 喜欢在深夜摸鱼 你习惯下载各种文献 却很少在下载后再阅读那些文献 2017年，你写的最多的东西是 title ....</span>.</p>
<p>我的大部分好友（包括我），听到的最多的歌词都是世界<br><img src="https://benny-1258761034.cos.ap-guangzhou.myqcloud.com/PT.jpg" alt="世界"></p>
<p>所以，关心世界是我们的本意吗?</p>
<h3 id="二"><a href="#二" class="headerlink" title="二"></a>二</h3><p>在不到一年之前，我<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">冰冰</span>爬取过网易云音乐的歌词。当时只是顺着民谣歌单来收集歌词，结果发现歌迷们爱好广泛，分类杂乱，连广播体操都能算到民谣里面去。</p>
<p>不过去掉停用词后，中文词后里出现频率最高的还是世界<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">interesting</span><br><img src="https://benny-1258761034.cos.ap-guangzhou.myqcloud.com/lyrics.jpg" alt="歌词"></p>
<p>怀着艺术情怀的歌手和作者们，全部灵感都来自于他们的世界。</p>
<h3 id="终"><a href="#终" class="headerlink" title="终"></a>终</h3><p>热爱生活，放眼世界，关心人类；我赞许那些一边哭泣一边追求的人。</p>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=25706282&auto=1&height=66"></iframe>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/13/关于深度学习进行金融预测的报告/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="柳冰冰">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/bingbing.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冰冰冰室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/13/关于深度学习进行金融预测的报告/" itemprop="url">关于深度学习进行金融预测的报告</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-13T00:00:00+08:00">
                2017-06-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/抖机灵/" itemprop="url" rel="index">
                    <span itemprop="name">抖机灵</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这是之前为了参加某次活动而写的一个研究小报告，算是对自己自学的一些总结。</p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>随着信息科技的进步，人类开始进入大数据时代。海量的数据，快速提高的计算能力，和对数据隐含的信息的需求，催生了一项面目一新的技术—深度学习。从89年Yenn Lecun将cnn用于手写数字识别，到吴恩达将深度学习用于猫的识别，再到谷歌的AlphaGo击败围棋世界冠军，深度学习以其强大的特征抽取和学习能力引发了巨大的浪潮，成为现在高新科技领域的一个研究重点，并且正在渗透进入多个行业。人们期望它能像击败围棋世界冠军一样，解决其所在行业的未解难题。</p>
<p>在投资领域中，股票等的价格预测一直是投资者极度关注的难题。因为涉及到国家政策、全球经济、个体交易者期望的外部因素，金融中的价格数据经常呈现出非线性，非平稳的特点，让人难以捉摸。根据有效市场理论（Efficient Market Hypothesis），股票价格呈随机游走状态。而在实际市场中，价格则往往存在某种变化的模式，同时，也受到外部消息的严重影响。对于价格波动中潜在的变化模式，由于深度学习所具有的强大的特征抽取能力，深度学习有能力在海量的数据中挖掘出变化的规律，从而给交易决策者提供宝贵的参考。</p>
<p>这份报告将使用深度学习的方法来进行价格预测的尝试。</p>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><h4 id="深度学习模型的选择"><a href="#深度学习模型的选择" class="headerlink" title="深度学习模型的选择"></a>深度学习模型的选择</h4><p>卷积神经网络在图像识别等多个领域取得了显著的成功。虽然卷积神经网络具有强大的特征识别能力，但是时间序列中的特征往往具有时间关系，传统的卷积神经网络的卷积和池化所带来的平移不变性，使得其难以模拟潜在的时间关系。虽然可以通过改变卷积方式的方法来对模型进行改进，但是文献调研表明，卷积神经网络在时间序列分析中并不常用。而在目前，LSTM是在应用中最为有效的序列模型。</p>
<h4 id="相关技巧"><a href="#相关技巧" class="headerlink" title="相关技巧"></a>相关技巧</h4><h5 id="数据预处理"><a href="#数据预处理" class="headerlink" title="数据预处理"></a>数据预处理</h5><ul>
<li><p>1、设置窗口</p>
<p>使用者可以通过设定窗口长度，截取一定长度的价格序列来进行分析。</p>
</li>
<li><p>2、数据标准化</p>
<p>相比于直接使用原始的价格数据，对数据进行标准化处理会是更好的选择。常用的标准化方法有z-score标准化，min-max标准化等，也可以通过计算回报率来简单处理。</p>
</li>
<li><p>超参数搜索</p>
<p>超参数对深度学习的效果和表现有着重要的影响。相比于手动调整参数更依赖于经验与对模型的理解，让计算机自动进行超参数搜索会是一个更节省人力的方法。对于超参数较少的模型，使用者可以采用网格搜索的方法，在预先定义的有限组合中进行搜索。网格搜索的计算代价会随着超参数数量呈指数级增长。另一个更可行的方法是随机搜索。这两种方法在scikit-learn中都有对应模块。</p>
</li>
<li><p>提前终止</p>
<p>对于复杂的模型，随着训练时间的推移，模型将存在过拟合的风险。当训练时间足够长时，往往会出现验证集误差不降反升的情况。此时可以使用提前终止的策略，当验证集上的误差在事先指定的循环次数内没有进一步改善时，算法就会终止。提前终止将有效地防止过拟合，同时，它也有效地选择了训练的轮数。</p>
</li>
<li><p>Bagging</p>
<p>Bagging(bootstrap aggregating)是通过结合几个模型降低泛化误差的技术。bagging通过对已有数据集进行重复采样，来构造新的数据集并进行训练，最后获得多个模型结果，并进行平均。可以证明bagging可以有效地减少泛化误差。在理想的情况下，通过训练出偏差小，而方差较大的多个模型，然后进行模型平均，使用者能得到更为理想的结果。</p>
</li>
</ul>
<h4 id="外部消息集成"><a href="#外部消息集成" class="headerlink" title="外部消息集成"></a>外部消息集成</h4><p>虽然时间序列数据中蕴含着价格变动的模式，然而金融市场的价格变动经常受到外界消息的强烈影响，在很多时候，一个外界的消息可以迅速改变当前的价格变动模式。在进行投资决策时，必须要对价格变化的模式和外部的信息进行集成。事实上，交易员Q在进行决策时，就是一种各种信息的集成。以下是两种可用的信息：</p>
<ul>
<li><p>其它市场指标数据</p>
<p>可以使用当前市场指标数据对价格进行回归分析，把结果集合到最终的决策中。</p>
</li>
<li><p>媒体和社交网络信息</p>
<p>媒体和社交网络上蕴含了大量的群体的观点和信息。通过对社交网络的文字进行处理，研究者可以获得当前大众群体对投资对象的观点和看法。从媒体中抽取出利好或利空的消息，也将对交易策略提供有效的信息。</p>
</li>
</ul>
<h3 id="初步完成的工作"><a href="#初步完成的工作" class="headerlink" title="初步完成的工作"></a>初步完成的工作</h3><p>因为时间、硬件、数据以及个人的知识的不足，此处仅仅完成了一个很不成熟的尝试，使用LSTM来对已有的金融价格数据进行预测。程序代码在code文件夹中。</p>
<ul>
<li><p>数据的预处理</p>
<p>观察附件1.1可以发现，自2016-12-08之后，该金融标的价格就再也没有改变。考虑到所有缺少的数值都由最近的之前工作日的值来替代，因此有理由认为在这之后的值都已经缺失，因此需要对其进行删除。</p>
<p>此处选择90天的窗口，对时间序列进行截断，使用前90天的价格序列来预测下一个价格。窗口长度是一个超参数，后续可以通过超参数搜索的方法调整。对一段子序列{a1,….an}，此处只通过以下式子进行简单处理：<br>$$n_i=(\frac{a_i}{a_0})$$<br>最后从处理得到的序列中，抽取10%的子时间序列来作为测试序列</p>
</li>
<li><p>LSTM模型的构建和训练</p>
<p>Keras基于Theano或TensorFlow，是一个常用的神经网络库。其优点是高度模块化，非常适合快速实验，进行简易快速的原型设计。此处使用keras快速的搭建了一个LSTM模型来进行实验，模型结构如下：<br><img src="https://benny-1258761034.cos.ap-guangzhou.myqcloud.com/1.jpg" alt="lstm"><br>在训练的过程中，程序使用训练集数据中的5%的数据作为验证集，并且使用了提前终止的训练策略。同时，程序使用MSE（最小均方误差）作为代价函数，使用了RMSProp作为优化方法。在模型中，包括节点个数，优化方法等都可以作为超参数进行进一步优化，比如流行的优化方法就还有Adam，SGD等。</p>
</li>
<li><p>结果</p>
<p>在完成模型的训练后，使用测试集对模型进行检测，通过90天的时间序列来预测下一个价格。得到的图像如下所示：</p>
</li>
</ul>
<p><img src="https://benny-1258761034.cos.ap-guangzhou.myqcloud.com/LSTM.png" alt="prediction_point_by_point"></p>
<p>  但是因为结果仅仅反映当前价格相对90天前的价格的变化，而在实际使用中，更需要关注的前后两天的价格变化趋势。在对结果变换回实际结果后，模型对前后两天的价格变化趋势的预测的准确率约为65%。程序的一次运行结果保存在code文件夹的ipython.html中。</p>
<p>  模型的预测结果并不是十分令人满意，模型本身也有许多需要改进之处，比如标准化方法的选取。同时，也没有进行超参数搜索和Bagging。个人认为，模型还有一定的提高空间，需要后续的工作和学习来进行完善和提高。</p>
<h4 id="后续计划"><a href="#后续计划" class="headerlink" title="后续计划"></a>后续计划</h4><ul>
<li><p>超参数搜索</p>
<p>模型中具有较多的超参数，包括数据初始化的窗宽选取，标准化的方法，模型的节点，优化的方法，初始学习率乃至激活函数的类型等。使用随机搜素的方法可以选取出更为合适的超参数。</p>
</li>
<li><p>Bagging</p>
<p>如前文所说，Bagging是一个减少泛化误差的强大的方法，任何机器学习算法都可以从Bagging中大幅获益（代价则是更多的运算和空间需求）。在机器学习竞赛中，获胜的算法往往都是多个模型的平均。模型集合使得使用者可以在单个模型总追求更小的偏差，而容许较大的方差。</p>
</li>
<li><p>大数据平台下的深度学习</p>
<p>无论是深度学习本身，还是超参数搜索和模型集合，所需要的计算能力都是巨大的。对于超参数搜索和模型集合来说，在大数据平台下并行求解是相对简单的。</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/14/中文维基百科的主题模型分析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="柳冰冰">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/bingbing.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冰冰冰室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/14/中文维基百科的主题模型分析/" itemprop="url">中文维基百科的主题模型分析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-14T20:12:20+08:00">
                2017-03-14
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/抖机灵/" itemprop="url" rel="index">
                    <span itemprop="name">抖机灵</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="语料的获取"><a href="#语料的获取" class="headerlink" title="语料的获取"></a>语料的获取</h3><h5 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h5><p>相比于其他语料，中文维基百科提供了免费的语料资源，可以直接从<a href="http://download.wikipedia.com/zhwiki/latest/zhwiki-latest-pages-articles.xml.bz2" target="_blank" rel="noopener">中文维基百科标题和正文</a>处直接下载。</p>
<h5 id="抽取"><a href="#抽取" class="headerlink" title="抽取"></a>抽取</h5><p>对下载好的文件，可以使用<a href="http://medialab.di.unipi.it/wiki/Wikipedia_Extractor" target="_blank" rel="noopener">Wikipedia_Extractor</a>直接对文件进行抽取处理：首先在解压缩下载文件得到xml格式的数据，然后执行WikiExtractor.py处理xml数据即可：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./WikiExtractor.py -b 1000M -o extracted2 zhwiki-latest-pages-articles.xml</span><br></pre></td></tr></table></figure></p>
<p>这表示把指定的xml文件抽取并以1000M的单位大小来切分文件，文件输出到extracted2文件夹中。</p>
<h5 id="简繁转换"><a href="#简繁转换" class="headerlink" title="简繁转换"></a>简繁转换</h5><p>抽取好的文档混杂的繁体中文，使用opencc可以对抽取的文档进行简繁转换。（很久之前就听说过opencc的作者BYVoid大神的大名TT）<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ opencc -i wiki_00 -o wiki_chs -c zht2zhs.ini</span><br></pre></td></tr></table></figure></p>
<p>经过简繁转换后，文档就预处理得差不多了。在我的实践中，文章中还剩下一下诸如<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">doc</span> <span class="attr">id</span>=<span class="string">"13"</span> <span class="attr">url</span>=<span class="string">"https://zh.wikipedia.org/wiki?curid=13"</span> <span class="attr">title</span>=<span class="string">"数学"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>之类的标签没有去除，可以简单的使用python的正则表达式再把它去掉。维基百科中文语料的获取主要参考<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">抄袭</span> 自 <a href="http://licstar.net/archives/tag/wikipedia-extractor" target="_blank" rel="noopener">这篇文章</a></p>
<h3 id="结巴中文分词"><a href="#结巴中文分词" class="headerlink" title="结巴中文分词"></a>结巴中文分词</h3><p>主题模型使用的是词袋模型，和英文词语直接有空格隔开不同，中文需要进一步进行分词。目前常用的中文分词工具有jieba<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">jiba</span> 分词。</p>
<p>无论是中文文章还是英文文章，文档中都会出现大量的和文档描述的主题没什么关联的词：比如英文的a，and；中文的‘不会’，‘不但’这一大类词语。中文的停用词词表很多，这是其中<a href="https://github.com/dongxiexidian/Chinese/blob/master/stopwords.dat" target="_blank" rel="noopener">一个</a></p>
<p>进行中文分词后的文本的前后对比：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">基础数学的知识与运用总是个人与团体生活中不可或缺的一块。其基本概念的精炼早在古埃及、美索不达米亚及古印度内的古代数学文本内便可观见。从那时开始，其发展便持续不断地有小幅的进展，直至16世纪的文艺复兴时期，因为和新的科学发现相作用而产生的数学革新导致了知识的加速发展，直至今日。</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">基础 数学 知识 团体 生活 不可或缺 一块 基本概念 精炼 古埃及 美索不达米亚 古印度 古代 数学 文本 可观 发展 持续 地有 小幅 进展 直至 世纪 文艺复兴 时期 科学 发现 作用 数学 革新 导致 知识 加速 发展 直至 今日</span><br></pre></td></tr></table></figure>
<p>不得不承认我的这次分词还不够智能，短短的一段就出现了‘地有’，‘可观’这样错误。突然想起小朋友用天真造句的梗了：<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">今天天真冷呀</span>。不过在这段关于数学的文章中，jieba分词的结果并没有对语义造成太大的影响，关键的词语都没有被分错。</p>
<h3 id="主题模型"><a href="#主题模型" class="headerlink" title="主题模型"></a>主题模型</h3><p>在主题模型，潜在狄利克雷分配（Latent Dirichlet allocation）是我最早接触到。关于LDA中复杂的数学原理，这篇文章讲解得相对深入浅出：LDA数学八卦</p>
<p>虽然其数学原理相当复杂，但是python中的gensim包使用起来却非常简单。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding=utf8</span></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> unicode_literals</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">from</span> gensim <span class="keyword">import</span> corpora,models</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logging.basicConfig(format=<span class="string">'%(asctime)s : %(levelname)s : %(message)s'</span>, level=logging.INFO)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">divide</span><span class="params">(x)</span>:</span><span class="comment">#根据文件的特征，切分出文档</span></span><br><span class="line">    <span class="keyword">with</span> io.open(x,encoding =<span class="string">'utf8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        text=[]</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">            l=line.split()</span><br><span class="line">            <span class="keyword">if</span> len(l)!=<span class="number">0</span>:</span><br><span class="line">                text.extend(l)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">yield</span> text</span><br><span class="line">                text=[]</span><br><span class="line">            </span><br><span class="line">dictionary=corpora.Dictionary(divide(<span class="string">'outfile.txt'</span>))</span><br><span class="line">corpus = [ dictionary.doc2bow(text) <span class="keyword">for</span> text <span class="keyword">in</span> divide(<span class="string">'outfile.txt'</span>)]</span><br><span class="line">dictionary.save(<span class="string">'mydict1.dic'</span>)</span><br><span class="line">corpora.MmCorpus.serialize(<span class="string">'corpora.mm'</span>, corpus) </span><br><span class="line">lda = models.LdaModel(corpus = corpus,id2word=dictionary,num_topics=<span class="number">100</span>,passes=<span class="number">3</span>)</span><br><span class="line">lda.save(<span class="string">'model1.lda'</span>)</span><br></pre></td></tr></table></figure></p>
<p>这里因为把所有文档都存到了一个文件中，所以后面根据文件的格式拆分了一下（有些小缺陷，不过应该不会造成太大的偏差）。这里预先设定了100个主题，构建这个主题模型会花费大量的运行时间。</p>
<h3 id="有趣的结果"><a href="#有趣的结果" class="headerlink" title="有趣的结果"></a>有趣的结果</h3><p>使用python wordcloud可以可视化得到的主题。<br>涉及文档最多的主题：<br><img src="https://benny-1258761034.cos.ap-guangzhou.myqcloud.com/max_word.jpg" alt="涉及文档最多的主题"></p>
<p>中文维基百科嘛，讲的都是中国的东西。虽然混入了一些奇怪的词语，不过考虑到她涉及了大量的文档，<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">当然是原谅她啊</span>。<br>涉及文档最少的主题：<br><img src="https://benny-1258761034.cos.ap-guangzhou.myqcloud.com/min_word.jpg" alt="涉及文档最少的主题"><br>AV二字真是分外醒目，<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">然而并没什么可奇怪的</span>。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/10/写博客的缘由/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="柳冰冰">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/bingbing.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冰冰冰室">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/10/写博客的缘由/" itemprop="url">写博客的缘由</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-10T20:12:20+08:00">
                2017-03-10
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/碎碎念/" itemprop="url" rel="index">
                    <span itemprop="name">碎碎念</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>从小以来，我都是一个感情丰富的人。在中学时代，我喜欢阅读各类的文学书籍，也喜欢和朋友们进行有趣的辩论和交谈。可能是因为上述的原因，我的作文水平还不赖，我喜欢把自己的观点用更加新颖有趣的方式表达出来。</p>
<p>可是在一段很长的时间里，我的写作能力有了很大的退化，以至于可能仅剩下有限的两种能力：在社交网络上自言自语的自嘲，以及在实验报告上数据和结果的简单罗列。我也没有了记述自己生活的习惯，人的记忆力总是有限的，生活中的小的实践，小的感遇，读过的一本书，对某个人的想念，虽然它们并不会带来巨大的转变，但是从中得到的经验也是值得铭记的。</p>
<p>曾有位尊敬的长者<span title="你知道的太多了" style="background-color: #252525; color: #252525;" onclick="if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background='none';}">不是闷声发大财那位</span> 说过，会讲话是非常重要的，把自己的观点、情感通过语言有层次，有逻辑地表达出来，会是一项十分有用的能力。我想，拥有写作的习惯会对提高这一能力有所帮助。</p>
<p>人之相与，俯仰一世；向之所欣，俯仰之间，已为陈迹。我将在空闲时候把自己做过的一些事情记述下来。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/bingbing.png" alt="柳冰冰">
            
              <p class="site-author-name" itemprop="name">柳冰冰</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">柳冰冰</span>

  
</div>


  



  <span class="post-meta-divider">|</span>



  




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"left","width":100,"height":200},"mobile":{"show":true},"log":false});</script></body>
</html>
